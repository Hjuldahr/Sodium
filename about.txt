e621 like website

db tables
# Used for post searching and filtering
- tags
    - tag_id
    - tag_label (15 lowercase letters with underscores for word joining (no leading or trailing _). improves searchability and reduces duplication)
    - tag_popularity (number of posts using this tag)
    - tag_shunning (number of user black lists include this tag)
    - tag_first_used (the first time this tag was used)
    - tag_last_used (the most recent time this tag was used)
- genres
    - genre_id
    - genre_label (30 lowercase letters with underscores for word joining (no leading or trailing _). improves searchability and reduces duplication)
    - genre_popularity (number of posts using this genre)
    - genre_shunning (number of user black lists include this genre)
    - genre_first_used (the first time this genre was used)
    - genre_last_used (the most recent time this genre was used)
- species
    - species_id
    - species_label (30 lowercase letters with underscores for word joining (no leading or trailing _). improves searchability and reduces duplication)
    - species_popularity (number of posts using this species)
    - species_shunning (number of user black lists include this species)
    - species_first_used (the first time this species was used)
    - species_last_used (the most recent time this species was used)
- characters
    - character_id
    - species_id
    - character_label (50 lowercase letters with underscores for word joining (no leading or trailing _). improves searchability and reduces duplication)
    - character_popularity (number of posts using this character)
    - character_shunning (number of user black lists include this character)
    - character_first_used (the first time this character was used)
    - character_last_used (the most recent time this character was used)

- post_comments
    - comment_id
    - post_id
    - user_id (commentor)
    - reference_id (optional, for replies)
    - content (actual comment)

- post_tags
    - post_id
    - tag_id
- post_species
    - post_id
    - species_id
- post_characters
    - post_id
    - character_id
- posts
    - post_id
    - user_id (author)
    - genre_id (optional)
    - title
    - description
    - thumbnail_image_url
    - image_url
    - created_at (when it was first posted)
    - updated_at (when it was last editted)
    - last_viewed (when any user last clicked on it)
    - visits (how many times it was visited (with or without an account))
    - favourites (how many user favourites lists its in)

- direct_messages
    - sender_id (user)
    - recipient_id (user)
    - content (actual message, cannot be modified)
    - sent_on (when it was sent, expires after 1 month)
    - read_on (when it was first viewed)
transient messages, not the main means of communication.

- reserved_user_name
    - user_id
    - old_user_name
    - reserved_on (auto expires in 1 week)

When a user changes their username, their old username gets reserved
This means if another user picks a username, they cannot use this reserved username as they didnt originally own it
However, if 1 week elapses and the user has not reverted their username, then the username becomes unreserved allowing it to be freely used again
Usernames that are actively in use are implicitly reserved, while these are explicitly / transiently reserved

- users
    - icon_post_id (post thumbnail images double as user icons)
    - user_id
    - user_name (can be used for login, unique, can be changed)
    - user_email (can be used for login, unique)
    - user_password_hash (must be used for login, not unique)
    - user_description
    - joined_on (when the account was created)
    - updated_on (when the account was altered)
    - deletion_requested_on (actual data deletion occurs 1 week after pressing the button, logging back in within the week cancels the deletion request automatically)

# Applied in addition to search filtering (configurable default search exclusion terms)
- user_genre_blacklist (hide all posts featuring this genre)
    - user_id
    - genre_id
- user_tag_blacklist (hide all posts featuring this character)
    - user_id
    - tag_id
- user_character_blacklist (hide all posts featuring this character)
    - user_id
    - character_id
- user_author_blacklist (hide all posts from user)
    - user_id
    - author_id (user)
- user_user_blacklist (hide all direct messages, comments and posts from other user)
    - user_id
    - other_user_id

For instance, if a person doesnt want to see any art in the sci fi genre, they can blacklist it instead of typing '-genre:sci_fi' in every search

blacklists and searchs can also use primitive regex for optimization (? for single chars, * for leading and trailing)